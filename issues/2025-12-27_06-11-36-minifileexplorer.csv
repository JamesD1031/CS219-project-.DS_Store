id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
001,P0,A-基础,build,Bootstrap Makefile + Git,初始化 git 仓库；添加 .gitignore；建立 C++17 Makefile 构建并生成可运行的 MiniFileExplorer 二进制（最小可交互：显示当前目录、支持 exit）。,"- `make` 成功生成 `build/MiniFileExplorer`
- 运行 `./build/MiniFileExplorer` 输出 `Current Directory:` 首行并进入提示符
- 输入 `exit` 后输出 `MiniFileExplorer closed successfully` 并退出","- `make`
- `printf ""exit\n"" | ./build/MiniFileExplorer`","- Makefile 使用 C++17
- 二进制名为 MiniFileExplorer
- 交互提示与 exit 文案精确",- 后续新增命令不破坏启动/exit 行为,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:5,
002,P0,A-基础,core,Command parsing + help,实现命令循环的稳定解析（支持引号，便于包含空格的路径/文件名）；实现 help 列出所有命令与说明；未知命令给出友好提示。,"- 每次循环打印 `Enter command (type 'help' for all commands): `
- 支持 `help` 输出包含：cd/ls/touch/mkdir/rm/rmdir/stat/search/cp/mv/du/exit（即使部分功能后续实现，也先列出）
- 支持解析形如 `cd ""/path with space""` 的单参数","- `printf ""help\nexit\n"" | ./build/MiniFileExplorer`
- `printf ""cd \""/tmp\""\nexit\n"" | ./build/MiniFileExplorer`（若平台无 /tmp，改用存在目录）","- 解析器不产生越界/崩溃
- help 内容与文档命令集合一致",- 之后实现各命令时不改变提示符/解析行为,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:55,
003,P0,A-基础,fs,Startup dir + cd (~ supported),实现启动目录逻辑（getcwd/命令行初始目录）；实现 cd 的存在性/目录性校验与 cd ~。,"- 无参数启动：显示当前工作目录
- 有参数启动：目录不存在输出 `Directory not found: <dir>` 并退出；存在则进入该目录
- `cd <path>`：不存在输出 `Invalid directory: <path>`；是文件输出 `Not a directory: <path>`
- `cd ~` 进入用户主目录","- `./build/MiniFileExplorer . <<< $'exit
'`
- `./build/MiniFileExplorer /no/such/dir`（应直接退出并打印提示）
- 交互：`printf ""cd ~\nexit\n"" | ./build/MiniFileExplorer`","- 错误提示文案与 PDF 一致
- cd 对相对/绝对路径均可工作",- 与命令解析/提示符兼容,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:12,
004,P0,A-基础,fs,ls listing (aligned columns),实现 `ls`：列出当前目录下文件/目录；目录名后加 /；输出 4 列（Name/Type/Size(B)/Modify Time）并对齐。,"- `ls` 输出首行表头：`Name Type Size(B) Modify Time`
- 每个目录项：目录名以 `/` 结尾、Type=Dir、Size(B) 为 `-`；文件 Type=File、Size(B) 为字节数
- Modify Time 格式 `YYYY-MM-DD HH:MM:SS`，列对齐可读","- 在临时目录创建文件与目录后：`printf ""ls\nexit\n"" | ./build/MiniFileExplorer <tmpdir>`
- 人工检查列对齐与目录 `/` 后缀","- 不因权限/异常目录项崩溃
- 时间格式稳定（19 字符）",- 之后加入 ls -s/-t 不破坏默认 ls 格式,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:46,
005,P0,A-基础,fs,touch + mkdir,实现 `touch` 与 `mkdir` 创建文件/目录，处理已存在提示。,"- `touch a.txt` 创建 0 字节文件
- 已存在时输出 `File already exists: a.txt`
- `mkdir data` 创建目录
- 已存在时输出 `Directory already exists: data`","- `tmp=$(mktemp -d) && printf ""touch a.txt\ntouch a.txt\nmkdir data\nmkdir data\nexit\n"" | ./build/MiniFileExplorer $tmp`
- 检查 $tmp/a.txt 与 $tmp/data 存在","- 不覆盖已有文件内容
- 创建失败有明确错误提示（不强制文案）",- 不影响 ls/stat/search 等行为,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:31,
006,P0,A-基础,fs,rm + rmdir (safe deletion),实现 `rm`（二次确认，仅 y 执行）与 `rmdir`（仅删除空目录），并输出 PDF 指定错误提示。,"- `rm a.txt` 提示 `Are you sure to delete a.txt? (y/n)`；输入 `n` 不删除；输入 `y` 删除
- `rmdir dir`：非空输出 `Directory not empty: dir`；不存在输出 `Directory not found: dir`","- `tmp=$(mktemp -d) && (cd $tmp && touch a.txt && mkdir d && touch d/x) && printf ""rm a.txt\nn\nrm a.txt\ny\nrmdir d\nrmdir no_such\nexit\n"" | ./build/MiniFileExplorer $tmp`
- 验证 a.txt 最终被删除；d 未被删除；no_such 提示正确","- 不实现任何递归删除
- 删除对象必须限制为文件（rm）/空目录（rmdir）",- 不影响 cp/mv/du 相关功能,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:39,
007,P0,A-基础,fs,stat details,实现 `stat [name]`：输出类型、路径、大小（目录为 -）、创建/修改/访问时间；处理缺参/不存在提示。,"- `stat` 无参数输出 `Missing target: Please enter'stat [name]'`
- 不存在输出 `Target not found: <name>`
- 存在时输出：Type/Path/Size/Create Time/Modify Time/Access Time（字段名可自定义，但信息必须齐）","- `tmp=$(mktemp -d) && (cd $tmp && echo hi > a.txt && mkdir d) && printf ""stat\nstat no_such\nstat a.txt\nstat d\nexit\n"" | ./build/MiniFileExplorer $tmp`","- 时间格式与 ls 一致
- 目录 size 显示为 `-`",- 不破坏之前命令输出,已完成,已完成,已完成,已提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:64,
008,P1,B-进阶,fs,search recursive (case-insensitive),实现 `search [keyword]`：递归搜索当前目录与子目录，名称包含关键词（不区分大小写），按“路径、类型”展示。,"- 有结果时输出：`Search results for '<kw>' (<n> items):`
- 每条结果：`<abs_path> (File)` 或 `<abs_path>/ (Dir)`
- 无结果输出：`No results found for '<kw>'`","- `tmp=$(mktemp -d) && mkdir -p $tmp/sub && touch $tmp/Note.txt $tmp/sub/old_note && mkdir $tmp/sub/old_note_dir && printf ""search note\nsearch xyz\nexit\n"" | ./build/MiniFileExplorer $tmp`","- 遍历使用 skip_permission_denied 且不跟随 symlink
- 输出计数与列表一致",- 与 du/ls -s 的递归逻辑复用不引入循环,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:74,
009,P1,B-进阶,fs,cp file with overwrite prompt,实现 `cp [src] [dst]` 文件复制；若目标路径存在同名文件则提示覆盖确认；并处理 Source not found / Invalid target path。,"- 源不存在输出 `Source not found`
- 目标非法输出 `Invalid target path`
- 目标存在同名文件时提示 `File exists in target: Overwrite? (y/n)`；仅 `y` 覆盖
- 成功复制后内容一致","- `tmp=$(mktemp -d) && mkdir -p $tmp/a $tmp/b && echo 123 > $tmp/a/note.txt && echo old > $tmp/b/note.txt && printf ""cp a/note.txt b/\nn\ncp a/note.txt b/\ny\nexit\n"" | ./build/MiniFileExplorer $tmp`
- 检查 $tmp/b/note.txt 最终内容为 123","- 仅支持文件复制（目录作为 src 应拒绝）
- 覆盖必须二次确认",- 不影响 rm/rmdir 的确认逻辑,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:83,
010,P1,B-进阶,fs,mv file/dir (move + rename),实现 `mv [src] [dst]`：支持移动文件/文件夹与重命名；处理 Source not found / Invalid target path。,"- 源不存在输出 `Source not found`
- 目标非法输出 `Invalid target path`
- `mv note.txt new_note.txt` 实现重命名
- `mv data ../archive/` 可把目录移动到目标目录下","- `tmp=$(mktemp -d) && mkdir -p $tmp/src/data && echo hi > $tmp/src/note.txt && printf ""mv src/note.txt src/new_note.txt\nmv src/data .\nexit\n"" | ./build/MiniFileExplorer $tmp`
- 检查 $tmp/src/new_note.txt 存在且 note.txt 不存在；$tmp/data 存在","- 优先使用 rename；失败时可退化 copy+remove
- 不做隐式覆盖（若目标已存在可提示 Invalid target path）",- 不影响 cp/ls/search 逻辑,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:83,
011,P1,B-进阶,fs,du directory total size (KB/MB),实现 `du [dir]`：统计目录递归总大小；单位 KB/MB 自动适配并输出 `Total size of <dir>: <n> KB/MB`。,"- 对存在目录输出 `Total size of <dir>: <n> KB` 或 `... <n> MB`
- 至少满足示例口径：1024B→1KB；2048000B→2MB（向上取整可接受）","- `tmp=$(mktemp -d) && mkdir -p $tmp/d && dd if=/dev/zero of=$tmp/d/a bs=1024 count=1 2>/dev/null && printf ""du d\nexit\n"" | ./build/MiniFileExplorer $tmp`","- 递归遍历跳过无权限项
- 不跟随 symlink",- 不影响 search 的遍历结果,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:92,
012,P1,B-进阶,fs,ls -s / ls -t sorting,实现 `ls -s`（按大小降序，目录按子文件总大小计算，空目录最后）与 `ls -t`（按修改时间降序），保持 4 列对齐。,"- `ls -t` 最新修改项排在最前
- `ls -s` 按大小降序；目录大小用于排序；空目录最后
- 输出仍为 `Name Type Size(B) Modify Time` 四列对齐","- 人工：在临时目录创建不同大小文件、不同 mtime 文件；运行 `ls -s`/`ls -t` 检查顺序
- 可用 `touch -t`（若系统支持）设置时间","- 目录大小计算与 du 逻辑一致（字节级）
- 排序稳定且不会显著拖慢空目录",- 不影响默认 ls 输出与格式,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:92,
013,P2,C-文档,docs,Write project README,按提交要求补齐项目文档：功能用途、构建方式、运行方式、命令清单与示例。,"- 仓库根目录存在 `README.md`
- 包含：构建命令、运行命令、所有命令说明与至少一组示例","- `cat README.md` 人工审阅
- 按 README 运行构建与最小示例","- 命令清单与 help 输出一致
- 示例命令可在本机执行（路径可用相对路径）",- README 更新不应与实现不一致,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:100,
014,P2,A/B-验收,tests,Add smoke test script,添加轻量端到端验收脚本（在临时目录创建数据并运行 MiniFileExplorer，验证关键输出/行为），用于本地快速回归。,"- `scripts/smoke_test.sh`（或等价）可运行且不访问仓库外敏感路径
- 脚本覆盖：touch/mkdir/ls/stat/search/cp/mv/du/rm/rmdir/exit 的最小路径","- `bash scripts/smoke_test.sh`
- 若时间字段不稳定，脚本仅断言关键字/文件存在性并在 notes 记录限制","- 脚本不包含破坏性路径（不删除非临时目录）
- 失败时给出清晰日志",- 作为回归保护，后续修改需保持脚本通过,未开始,未开始,未开始,未提交,codex,plan/2025-12-27_06-09-53-minifileexplorer.md:127,
